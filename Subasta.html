<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subastas Online - Inicio de Sesi√≥n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Header sem√°ntico -->
    <header class="bg-primary text-white py-3">
        <div class="container">
            <h1 class="text-center mb-0">
                <i class="fas fa-gavel me-2"></i>Subastas Online
            </h1>
            <p class="text-center mb-0">El mejor sitio de subastas online</p>
        </div>
    </header>

    <!-- Navegaci√≥n principal -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="#inicio">
                <i class="fas fa-gavel me-2"></i>Subastas Online
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="#nosotros">Nosotros</a>
                <a class="nav-link" href="#contacto">Contacto</a>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main class="container my-5">
        <!-- Secci√≥n de Login -->
        <section id="ingreso" class="row justify-content-center">
            <div class="col-md-6">
                <article class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h2 class="card-title mb-0">
                            <i class="fas fa-sign-in-alt me-2"></i>Iniciar Sesi√≥n
                        </h2>
                    </div>
                    <div class="card-body">
                        <form id="formLogin" onsubmit="ingresarUsuario(event)" novalidate>
                            <div class="mb-3">
                                <label for="correoIni" class="form-label">
                                    <i class="fas fa-envelope me-2"></i>Correo electr√≥nico:
                                </label>
                                <input type="email" id="correoIni" name="correoIni" class="form-control" 
                                       required autocomplete="email" 
                                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                       placeholder="ejemplo@correo.com">
                                <div class="invalid-feedback">
                                    Por favor ingresa un correo v√°lido
                                </div>
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>No compartimos estos datos
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="contrase√±aIni" class="form-label">
                                    <i class="fas fa-lock me-2"></i>Contrase√±a:
                                </label>
                                <div class="input-group">
                                    <input type="password" id="contrase√±aIni" name="contrase√±aIni" 
                                           class="form-control" required minlength="6" 
                                           autocomplete="current-password"
                                           placeholder="M√≠nimo 6 caracteres">
                                    <button class="btn btn-outline-secondary" type="button" 
                                            onclick="togglePassword('contrase√±aIni')"
                                            title="Mostrar/Ocultar contrase√±a">
                                        <i class="fas fa-eye" id="eyeIcon1"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    La contrase√±a debe tener al menos 6 caracteres
                                </div>
                            </div>

                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-sign-in-alt me-2"></i>Ingresar
                                </button>
                            </div>
                        </form>
                        
                        <div class="text-center mt-3">
                            <p class="text-muted mb-2">¬øNo tienes una cuenta?</p>
                            <button type="button" class="btn btn-outline-secondary" onclick="mostrarRegistro()">
                                <i class="fas fa-user-plus me-2"></i>Crear cuenta nueva
                            </button>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <!-- Secci√≥n de Registro -->
        <section id="registro" style="display: none;" class="row justify-content-center">
            <div class="col-md-6">
                <article class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h2 class="card-title mb-0">
                            <i class="fas fa-user-plus me-2"></i>Crear Cuenta
                        </h2>
                    </div>
                    <div class="card-body">
                        <form id="formRegistro" onsubmit="registrarUsuario(event)" novalidate>
                            <div class="mb-3">
                                <label for="nombreReg" class="form-label">
                                    <i class="fas fa-user me-2"></i>Nombre completo:
                                </label>
                                <input type="text" id="nombreReg" name="nombreReg" class="form-control" 
                                       required minlength="2" autocomplete="name"
                                       placeholder="Tu nombre completo">
                                <div class="invalid-feedback">
                                    El nombre debe tener al menos 2 caracteres
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="correoReg" class="form-label">
                                    <i class="fas fa-envelope me-2"></i>Correo electr√≥nico:
                                </label>
                                <input type="email" id="correoReg" name="correoReg" class="form-control" 
                                       required autocomplete="email"
                                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                       placeholder="ejemplo@correo.com">
                                <div class="invalid-feedback">
                                    Por favor ingresa un correo v√°lido
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="contrase√±aReg" class="form-label">
                                    <i class="fas fa-lock me-2"></i>Crear contrase√±a:
                                </label>
                                <div class="input-group">
                                    <input type="password" id="contrase√±aReg" name="contrase√±aReg" 
                                           class="form-control" required minlength="6" 
                                           autocomplete="new-password"
                                           placeholder="M√≠nimo 6 caracteres">
                                    <button class="btn btn-outline-secondary" type="button" 
                                            onclick="togglePassword('contrase√±aReg')"
                                            title="Mostrar/Ocultar contrase√±a">
                                        <i class="fas fa-eye" id="eyeIcon2"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    La contrase√±a debe tener al menos 6 caracteres
                                </div>
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>
                                    M√≠nimo 6 caracteres, incluye n√∫meros y letras
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="confirmarContrase√±a" class="form-label">
                                    <i class="fas fa-check-circle me-2"></i>Confirmar contrase√±a:
                                </label>
                                <input type="password" id="confirmarContrase√±a" name="confirmarContrase√±a" 
                                       class="form-control" required minlength="6"
                                       placeholder="Repite tu contrase√±a">
                                <div class="invalid-feedback">
                                    Las contrase√±as no coinciden
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-success btn-lg">
                                    <i class="fas fa-user-plus me-2"></i>Registrarme
                                </button>
                            </div>
                        </form>
                        
                        <div class="text-center mt-3">
                            <p class="text-muted mb-2">¬øYa tienes una cuenta?</p>
                            <button type="button" class="btn btn-outline-secondary" onclick="mostrarLogin()">
                                <i class="fas fa-sign-in-alt me-2"></i>Iniciar sesi√≥n
                            </button>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <!-- Video promocional -->
        <section class="mt-5">
            <div class="row">
                <div class="col-12">
                    <div class="card shadow">
                        <div class="card-header bg-info text-white">
                            <h3 class="card-title mb-0">
                                <i class="fas fa-play-circle me-2"></i>¬øC√≥mo funciona nuestra plataforma?
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="ratio ratio-16x9">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                                        title="Video promocional subastas" 
                                        allowfullscreen
                                        loading="lazy">
                                </iframe>
                            </div>
                            <div class="mt-3">
                                <h5>Beneficios de usar Subastas Online:</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Subastas en tiempo real
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Productos verificados
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Env√≠o seguro
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Precios competitivos
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Soporte 24/7
                                            </li>
                                            <li class="list-group-item">
                                                <i class="fas fa-check-circle text-success me-2"></i>
                                                Garant√≠a de compra
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer informativo -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>
                        <i class="fas fa-gavel me-2"></i>Subastas Online
                    </h5>
                    <p>La mejor plataforma de subastas en l√≠nea de Chile.</p>
                    <div class="social-links">
                        <a href="#" class="text-white me-3" title="Facebook">
                            <i class="fab fa-facebook fa-lg"></i>
                        </a>
                        <a href="#" class="text-white me-3" title="Twitter">
                            <i class="fab fa-twitter fa-lg"></i>
                        </a>
                        <a href="#" class="text-white me-3" title="Instagram">
                            <i class="fab fa-instagram fa-lg"></i>
                        </a>
                    </div>
                </div>
                <div class="col-md-4">
                    <h5>Enlaces √∫tiles</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white-50">T√©rminos y condiciones</a></li>
                        <li><a href="#" class="text-white-50">Pol√≠tica de privacidad</a></li>
                        <li><a href="#" class="text-white-50">Centro de ayuda</a></li>
                        <li><a href="#" class="text-white-50">Preguntas frecuentes</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Contacto</h5>
                    <p class="mb-1">
                        <i class="fas fa-envelope me-2"></i>info@subastasonline.cl
                    </p>
                    <p class="mb-1">
                        <i class="fas fa-phone me-2"></i>+56 9 1234 5678
                    </p>
                    <p class="mb-1">
                        <i class="fas fa-map-marker-alt me-2"></i>Santiago, Chile
                    </p>
                    <p class="mb-0">
                        <i class="fas fa-clock me-2"></i>Lun - Vie: 9:00 - 18:00
                    </p>
                </div>
            </div>
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">
                        &copy; 2025 Subastas Online. Todos los derechos reservados. 
                        | Desarrollado por 
                        <a href="https://github.com/0trujillo" class="text-white">0trujillo</a> & 
                        <a href="https://github.com/Stellexd" class="text-white">Stellexd</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript integrado -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ====== SISTEMA DE AUTENTICACI√ìN Y VALIDACIONES ======
        
        // Variables globales
        let usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
        
        // Datos de usuarios de prueba (solo para desarrollo)
        if (usuarios.length === 0) {
            usuarios = [
                {
                    id: 1,
                    nombre: "Usuario Demo",
                    correo: "demo@ejemplo.com",
                    contrase√±a: "123456",
                    presupuesto: 15000,
                    fechaRegistro: new Date().toISOString()
                },
                {
                    id: 2,
                    nombre: "Ana Garc√≠a",
                    correo: "ana@ejemplo.com", 
                    contrase√±a: "password",
                    presupuesto: 8000,
                    fechaRegistro: new Date().toISOString()
                }
            ];
            localStorage.setItem('usuarios', JSON.stringify(usuarios));
        }

        // ====== FUNCIONES DE UTILIDAD ======
        
        function mostrarNotificacion(mensaje, tipo = 'info', duracion = 5000) {
            // Crear elemento de notificaci√≥n
            const toast = document.createElement('div');
            toast.className = `alert alert-${tipo} alert-dismissible fade show position-fixed`;
            toast.style.cssText = `
                top: 20px; 
                right: 20px; 
                z-index: 9999; 
                min-width: 350px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            `;
            
            toast.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas ${tipo === 'success' ? 'fa-check-circle' : 
                                   tipo === 'danger' ? 'fa-exclamation-triangle' : 
                                   tipo === 'warning' ? 'fa-exclamation-circle' : 
                                   'fa-info-circle'} me-2"></i>
                    <div class="flex-grow-1">${mensaje}</div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto-eliminar despu√©s del tiempo especificado
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, duracion);
        }

        function validarEmail(email) {
            const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return regex.test(email);
        }

        function validarContrase√±a(contrase√±a) {
            return contrase√±a.length >= 6;
        }

        function limpiarFormulario(formulario) {
            formulario.reset();
            formulario.classList.remove('was-validated');
            
            // Remover clases de validaci√≥n de todos los inputs
            const inputs = formulario.querySelectorAll('.form-control');
            inputs.forEach(input => {
                input.classList.remove('is-valid', 'is-invalid');
            });
        }

        // ====== FUNCIONES DE NAVEGACI√ìN ======
        
        function mostrarRegistro() {
            document.getElementById('ingreso').style.display = 'none';
            document.getElementById('registro').style.display = 'block';
            
            // Limpiar formulario de login
            const formLogin = document.getElementById('formLogin');
            limpiarFormulario(formLogin);
            
            // Scroll suave hacia el formulario
            document.getElementById('registro').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }

        function mostrarLogin() {
            document.getElementById('registro').style.display = 'none';
            document.getElementById('ingreso').style.display = 'block';
            
            // Limpiar formulario de registro
            const formRegistro = document.getElementById('formRegistro');
            limpiarFormulario(formRegistro);
            
            // Scroll suave hacia el formulario
            document.getElementById('ingreso').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = document.getElementById(inputId === 'contrase√±aIni' ? 'eyeIcon1' : 'eyeIcon2');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // ====== FUNCIONES DE VALIDACI√ìN EN TIEMPO REAL ======
        
        function configurarValidacionTiempoReal() {
            // Validaci√≥n para formulario de login
            const formLogin = document.getElementById('formLogin');
            const inputsLogin = formLogin.querySelectorAll('.form-control');
            
            inputsLogin.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.checkValidity()) {
                        this.classList.remove('is-invalid');
                        this.classList.add('is-valid');
                    } else {
                        this.classList.remove('is-valid');
                        this.classList.add('is-invalid');
                    }
                });
                
                input.addEventListener('blur', function() {
                    if (this.value.trim() !== '') {
                        if (this.checkValidity()) {
                            this.classList.remove('is-invalid');
                            this.classList.add('is-valid');
                        } else {
                            this.classList.remove('is-valid');
                            this.classList.add('is-invalid');
                        }
                    }
                });
            });

            // Validaci√≥n para formulario de registro
            const formRegistro = document.getElementById('formRegistro');
            const inputsRegistro = formRegistro.querySelectorAll('.form-control');
            
            inputsRegistro.forEach(input => {
                input.addEventListener('input', function() {
                    // Validaci√≥n especial para confirmar contrase√±a
                    if (this.id === 'confirmarContrase√±a') {
                        const contrase√±a = document.getElementById('contrase√±aReg').value;
                        const confirmar = this.value;
                        
                        if (confirmar === contrase√±a && confirmar.length >= 6) {
                            this.setCustomValidity('');
                            this.classList.remove('is-invalid');
                            this.classList.add('is-valid');
                        } else {
                            this.setCustomValidity('Las contrase√±as no coinciden');
                            this.classList.remove('is-valid');
                            this.classList.add('is-invalid');
                        }
                    } else {
                        if (this.checkValidity()) {
                            this.classList.remove('is-invalid');
                            this.classList.add('is-valid');
                        } else {
                            this.classList.remove('is-valid');
                            this.classList.add('is-invalid');
                        }
                    }
                });
            });

            // Validaci√≥n especial para contrase√±a de registro
            document.getElementById('contrase√±aReg').addEventListener('input', function() {
                const confirmar = document.getElementById('confirmarContrase√±a');
                if (confirmar.value) {
                    confirmar.dispatchEvent(new Event('input'));
                }
            });
        }

        // ====== FUNCIONES DE AUTENTICACI√ìN ======
        
        function registrarUsuario(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            
            // Validar formulario
            if (!form.checkValidity()) {
                event.stopPropagation();
                form.classList.add('was-validated');
                mostrarNotificacion('‚ùå Por favor corrige los errores en el formulario', 'danger');
                return;
            }

            const nombre = formData.get('nombreReg').trim();
            const correo = formData.get('correoReg').trim().toLowerCase();
            const contrase√±a = formData.get('contrase√±aReg');
            const confirmarContrase√±a = formData.get('confirmarContrase√±a');

            // Validaciones adicionales
            if (!validarEmail(correo)) {
                mostrarNotificacion('‚ùå El formato del correo no es v√°lido', 'danger');
                return;
            }

            if (!validarContrase√±a(contrase√±a)) {
                mostrarNotificacion('‚ùå La contrase√±a debe tener al menos 6 caracteres', 'danger');
                return;
            }

            if (contrase√±a !== confirmarContrase√±a) {
                mostrarNotificacion('‚ùå Las contrase√±as no coinciden', 'danger');
                return;
            }

            // Verificar si el usuario ya existe
            const usuarioExistente = usuarios.find(u => u.correo === correo);
            if (usuarioExistente) {
                mostrarNotificacion('‚ö†Ô∏è Ya existe una cuenta con este correo electr√≥nico', 'warning');
                return;
            }

            // Crear nuevo usuario
            const nuevoUsuario = {
                id: Date.now(),
                nombre: nombre,
                correo: correo,
                contrase√±a: contrase√±a,
                presupuesto: 5000, // Presupuesto inicial
                fechaRegistro: new Date().toISOString()
            };

            // Agregar usuario y guardar
            usuarios.push(nuevoUsuario);
            localStorage.setItem('usuarios', JSON.stringify(usuarios));

            // Mostrar √©xito y limpiar formulario
            mostrarNotificacion(
                `‚úÖ ¬°Bienvenido ${nombre}! Tu cuenta ha sido creada exitosamente. Presupuesto inicial: $5,000`, 
                'success',
                7000
            );
            
            limpiarFormulario(form);
            
            // Cambiar a formulario de login despu√©s de 2 segundos
            setTimeout(() => {
                mostrarLogin();
                // Pre-llenar el email en el login
                document.getElementById('correoIni').value = correo;
            }, 2000);
        }

        function ingresarUsuario(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);

            // Validar formulario
            if (!form.checkValidity()) {
                event.stopPropagation();
                form.classList.add('was-validated');
                mostrarNotificacion('‚ùå Por favor completa todos los campos correctamente', 'danger');
                return;
            }

            const correo = formData.get('correoIni').trim().toLowerCase();
            const contrase√±a = formData.get('contrase√±aIni');

            // Buscar usuario
            const usuario = usuarios.find(u => u.correo === correo && u.contrase√±a === contrase√±a);

            if (usuario) {
                // Login exitoso
                localStorage.setItem('usuarioActual', JSON.stringify(usuario));
                
                mostrarNotificacion(
                    `üéâ ¬°Bienvenido de vuelta, ${usuario.nombre}! Redirigiendo...`, 
                    'success'
                );

                // Redirigir despu√©s de 1.5 segundos
                setTimeout(() => {
                    window.location.href = 'Inicio.html';
                }, 1500);
                
            } else {
                // Login fallido
                const usuarioExiste = usuarios.find(u => u.correo === correo);
                
                if (usuarioExiste) {
                    mostrarNotificacion('‚ùå Contrase√±a incorrecta', 'danger');
                    // Limpiar solo la contrase√±a
                    document.getElementById('contrase√±aIni').value = '';
                    document.getElementById('contrase√±aIni').focus();
                } else {
                    mostrarNotificacion('‚ùå No existe una cuenta con ese correo electr√≥nico', 'danger');
                    // Sugerir registro
                    setTimeout(() => {
                        mostrarNotificacion(
                            'üí° ¬øNo tienes cuenta? Haz clic en "Crear cuenta nueva"', 
                            'info',
                            4000
                        );
                    }, 1000);
                }
            }
        }

        // ====== FUNCIONES DE DEMOSTRACI√ìN ======
        
        function llenarDatosDemo() {
            // Llenar formulario de login con datos demo
            document.getElementById('correoIni').value = 'demo@ejemplo.com';
            document.getElementById('contrase√±aIni').value = '123456';
            
            mostrarNotificacion(
                'üéÆ Datos demo cargados. ¬°Haz clic en "Ingresar" para probar!', 
                'info'
            );
        }

        // ====== VERIFICACI√ìN DE SESI√ìN ======
        
        function verificarSesionExistente() {
            const usuarioActual = localStorage.getItem('usuarioActual');
            if (usuarioActual) {
                const usuario = JSON.parse(usuarioActual);
                mostrarNotificacion(
                    `üëã Ya tienes una sesi√≥n activa, ${usuario.nombre}. Redirigiendo...`, 
                    'info'
                );
                setTimeout(() => {
                    window.location.href = 'Inicio.html';
                }, 2000);
            }
        }

        // ====== INICIALIZACI√ìN ======
        
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar si ya hay sesi√≥n activa
            verificarSesionExistente();
            
            // Configurar validaciones en tiempo real
            configurarValidacionTiempoReal();
            
            // Mensaje de bienvenida inicial
            setTimeout(() => {
                mostrarNotificacion(
                    'üëã ¬°Bienvenido a Subastas Online! Inicia sesi√≥n o crea tu cuenta para empezar', 
                    'info',
                    6000
                );
            }, 1000);
            
            // Agregar bot√≥n demo (solo para desarrollo)
            const headerContainer = document.querySelector('header .container');
            const demoButton = document.createElement('button');
            demoButton.className = 'btn btn-outline-light btn-sm position-absolute';
            demoButton.style.cssText = 'top: 10px; right: 10px;';
            demoButton.innerHTML = '<i class="fas fa-play me-1"></i>Demo';
            demoButton.onclick = llenarDatosDemo;
            headerContainer.style.position = 'relative';
            headerContainer.appendChild(demoButton);
        });

        // ====== EVENT LISTENERS ADICIONALES ======
        
        // Detectar Enter en formularios
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const activeForm = document.querySelector('form:not([style*="display: none"])');
                if (activeForm) {
                    const submitButton = activeForm.querySelector('button[type="submit"]');
                    if (submitButton) {
                        submitButton.click();
                    }
                }
            }
        });

        // Prevenir env√≠o de formularios con errores
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function(e) {
                if (!this.checkValidity()) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                this.classList.add('was-validated');
            });
        });

        // ====== FUNCIONES EXPORTADAS GLOBALMENTE ======
        
        // Hacer funciones disponibles globalmente para onclick
        window.mostrarRegistro = mostrarRegistro;
        window.mostrarLogin = mostrarLogin;
        window.togglePassword = togglePassword;
        window.registrarUsuario = registrarUsuario;
        window.ingresarUsuario = ingresarUsuario;
        
        console.log('üéØ Sistema de autenticaci√≥n iniciado correctamente');
        console.log('üë• Usuarios registrados:', usuarios.length);
        console.log('üîß Modo desarrollo: Bot√≥n demo disponible');
    </script>
</body>
</html>